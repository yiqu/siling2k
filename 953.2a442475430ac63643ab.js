(self.webpackChunksiling2k=self.webpackChunksiling2k||[]).push([[953],{8953:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SettingsModule:()=>nt});var n=i(1116),o=i(8785),s=i(229),a=i(1),r=i(1041),c=i(2935),d=i(3936),g=i(8639),l=i(5366),h=i(5965),u=i(1293),p=i(7307),f=i(3070),w=i(9550),m=i(4369);function Z(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",15),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).resetNameValue()}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA(),l.qZA()}}function x(t,e){if(1&t){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",2),l.TgZ(2,"mat-icon",3),l._uU(3,"account_balance"),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"h1",5),l._uU(6," Add new Siling1k institution "),l.qZA(),l.qZA(),l.qZA(),l._UZ(7,"hr"),l.TgZ(8,"div",6),l.TgZ(9,"form",7),l.TgZ(10,"mat-form-field",8),l.TgZ(11,"mat-label"),l._uU(12,"Institution name"),l.qZA(),l.TgZ(13,"input",9),l.NdJ("keyup.enter",function(){return l.CHM(t),l.oxw().onSave()}),l.qZA(),l.YNc(14,Z,3,0,"button",10),l.qZA(),l.TgZ(15,"mat-form-field",8),l.TgZ(16,"mat-label"),l._uU(17,"Created date"),l.qZA(),l._UZ(18,"input",11),l.qZA(),l.qZA(),l.qZA(),l._UZ(19,"hr"),l.TgZ(20,"div",12),l.TgZ(21,"button",13),l.NdJ("click",function(){return l.CHM(t),l.oxw().onSave()}),l._uU(22,"Save"),l.qZA(),l.TgZ(23,"button",14),l.NdJ("click",function(){return l.CHM(t),l.oxw().onCancel()}),l._uU(24,"Cancel"),l.qZA(),l.qZA(),l.BQk()}if(2&t){const t=l.oxw();let e;l.xp6(9),l.Q6J("formGroup",t.entryFg),l.xp6(4),l.Q6J("formControlName","name"),l.xp6(1),l.Q6J("ngIf",null==(e=t.entryFg.get("name"))?null:e.value),l.xp6(4),l.Q6J("formControlName","dateAdded"),l.xp6(3),l.Q6J("disabled",t.entryFg.invalid)}}function b(t,e){1&t&&(l.TgZ(0,"div"),l._uU(1," Loading... "),l.qZA())}let L=(()=>{class t{constructor(t,e,i){this.fb=t,this.dialogRef=e,this.data=i,this.entryFg=this.fb.group({name:g.j2(null,!1,[r.kI.required,d.MS]),dateAdded:g.j2(new Date,!0)})}ngOnInit(){}onCancel(){this.dialogRef.close()}onSave(){this.entryFg.valid&&this.dialogRef.close(this.entryFg.getRawValue())}resetNameValue(){var t;null===(t=this.entryFg.get("name"))||void 0===t||t.reset()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(r.qu),l.Y36(c.so),l.Y36(c.WI))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-settings-new-siling-dialog"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noFg",""],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center","ngClass.gt-sm","big"],[1,""],["fxLayout","column","fxLayoutAlign","center center"],[1,"mb-0"],["mat-dialog-content",""],["onsu","",3,"formGroup"],["appearance","standard",1,"w-100"],["type","text","matInput","",3,"formControlName","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear","type","button",3,"click",4,"ngIf"],["type","text","matInput","",3,"formControlName"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","1rem","fxLayoutAlign","end center"],["mat-button","","type","submit",3,"disabled","click"],["mat-button","","type","button",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear","type","button",3,"click"]],template:function(t,e){if(1&t&&(l.YNc(0,x,25,5,"ng-container",0),l.YNc(1,b,2,0,"ng-template",null,1,l.W1O)),2&t){const t=l.MAs(2);l.Q6J("ngIf",e.entryFg)("ngIfElse",t)}},directives:[n.O5,h.xw,h.SQ,h.Wh,u.oO,p.Hw,c.xY,r._Y,r.JL,r.sg,f.KE,f.hX,w.Nt,r.Fj,r.JJ,r.u,c.H8,m.lW,f.R9],styles:["h1[_ngcontent-%COMP%]{font-size:18px;font-weight:700}h1[_ngcontent-%COMP%]   .err-header[_ngcontent-%COMP%]{font-size:13px}.big[_ngcontent-%COMP%]{width:30rem}"]}),t})(),y=(()=>{class t{constructor(t){this.dialog=t,this.dialogRef=void 0}getDialog(t){return this.dialogRef=void 0,this.dialogRef=this.dialog.open(L,{data:{},panelClass:"new-siling1k-ins",hasBackdrop:!0,autoFocus:!0,disableClose:!0}),this.dialogRef}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(c.uw))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})();var A=i(2852);let v=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-settings"]],decls:5,vars:0,consts:[[1,"container-fluid","mb-5","mt-3"],["fxLayout","row","fxLayoutAlign","center center",1,"if","underline","mb-5"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"section",1),l.TgZ(2,"h1"),l._uU(3,"Settings"),l.qZA(),l.qZA(),l._UZ(4,"router-outlet"),l.qZA())},directives:[h.xw,h.Wh,A.lC],styles:[""]}),t})();const H=(0,s.PH)("[Settings/API] Show/hide list update start",(0,s.Ky)()),C=(0,s.PH)("[Settings/API] Show/hide list update success",(0,s.Ky)()),k=(0,s.PH)("[Settings/API] Show/hide list update failed",(0,s.Ky)()),S=(0,s.PH)("[Settings/API] Get show/hide list start"),_=(0,s.PH)("[Settings/API] Get show/hide list success",(0,s.Ky)()),O=(0,s.PH)("[Settings/API] Get show/hide list failed",(0,s.Ky)());var q=i(4088);const T=(0,s.ZF)("settings"),D=((0,s.ZF)("admin"),(0,s.P1)(T,t=>t.showHideLists?t.showHideLists.hiding:[])),M=(0,s.P1)(q.n4,D,(t,e)=>{const i=[],n=[];return t.forEach(t=>{e.find(e=>t.id===e.id)?n.push(t):i.push(t)}),{hiding:n,showing:i}});var P=i(9853),F=i(8811);let I=(()=>{class t{constructor(t,e){this.store=t,this.rs=e,this.showHideList$=this.store.select(M)}updateShowHideList(t){this.store.dispatch(H({showHideData:t}))}saveShowHideList(t){return this.rs.createDocument(t,"settings/kqpro/showHideList")}fetchShowHideList(){return this.rs.getDocument("settings/kqpro/showHideList")}getShowHideList(){this.store.dispatch(S())}addNewSilingCompany(t){this.store.dispatch(P.wb({company:t}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(s.yh),l.LFG(F.v))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=i(2523),U=i(9244),J=i(158);function j(t,e){if(1&t&&l._UZ(0,"img",9),2&t){const t=l.oxw().$implicit;l.Q6J("src","assets/banner/"+t.id+".jpg",l.LSH)("alt",t.name+" logo")}}function G(t,e){if(1&t&&(l.TgZ(0,"div",6),l.TgZ(1,"mat-icon",7),l._uU(2,"account_balance"),l.qZA(),l._uU(3),l.ALo(4,"silingCompanyDisplay"),l.YNc(5,j,1,2,"img",8),l.qZA()),2&t){const t=e.$implicit;l.xp6(3),l.hij(" ",l.lcZ(4,1,t.name)," ")}}function Y(t,e){if(1&t&&l._UZ(0,"img",9),2&t){const t=l.oxw().$implicit;l.Q6J("src","assets/banner/"+t.id+".jpg",l.LSH)("alt",t.name+" logo")}}function Q(t,e){if(1&t&&(l.TgZ(0,"div",10),l.TgZ(1,"mat-icon",7),l._uU(2,"hide_source"),l.qZA(),l._uU(3),l.ALo(4,"silingCompanyDisplay"),l.YNc(5,Y,1,2,"img",8),l.qZA()),2&t){const t=e.$implicit;l.xp6(3),l.hij(" ",l.lcZ(4,1,t.name)," ")}}let $=(()=>{class t{constructor(){this.onShowHideChange=new l.vpe,this.showList=[],this.hideList=[],this.showHideData={hiding:[],showing:[]}}ngOnChanges(){this.showHideData&&(this.showList=this.showHideData.showing,this.hideList=this.showHideData.hiding)}ngOnInit(){}drop(t){t.previousContainer===t.container?(0,U.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,U.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),console.log(this.showList,this.hideList),this.onShowHideChange.emit({hiding:this.hideList,showing:this.showList})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-settings-core-show-hide"]],inputs:{showHideData:"showHideData"},outputs:{onShowHideChange:"onShowHideChange"},features:[l.TTD],decls:11,vars:4,consts:[["cdkDropListGroup",""],["ngClass.gt-sm","desktop-width","ngClass.sm","mobile-width","ngClass.lt-sm","mobile-width",1,"drop-area-container"],[1,"mb-3","if"],["cdkDropList","",1,"drop-area-list",3,"cdkDropListData","cdkDropListDropped"],["class","item-box left roboto","cdkDrag","",4,"ngFor","ngForOf"],["class","item-box right roboto","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"item-box","left","roboto"],[1,"mr-2"],["class","drop-logo",3,"src","alt",4,"cdkDragPreview"],[1,"drop-logo",3,"src","alt"],["cdkDrag","",1,"item-box","right","roboto"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3,"Currently Being Displayed"),l.qZA(),l.TgZ(4,"div",3),l.NdJ("cdkDropListDropped",function(t){return e.drop(t)}),l.YNc(5,G,6,3,"div",4),l.qZA(),l.qZA(),l.TgZ(6,"div",1),l.TgZ(7,"h2",2),l._uU(8,"Hidden"),l.qZA(),l.TgZ(9,"div",3),l.NdJ("cdkDropListDropped",function(t){return e.drop(t)}),l.YNc(10,Q,6,3,"div",5),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("cdkDropListData",e.showList),l.xp6(1),l.Q6J("ngForOf",e.showList),l.xp6(4),l.Q6J("cdkDropListData",e.hideList),l.xp6(1),l.Q6J("ngForOf",e.hideList))},directives:[U.Fd,u.oO,U.Wj,n.sg,U.Zt,p.Hw,U.pV],pipes:[J.n],styles:[".drop-area-container[_ngcontent-%COMP%]{max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.drop-area-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{background-color:#b3ffcc}.drop-area-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{background-color:#e6e6e6}.desktop-width[_ngcontent-%COMP%]{width:400px}.mobile-width[_ngcontent-%COMP%]{width:100%}.drop-area-list[_ngcontent-%COMP%]{border:1px solid #ccc;min-height:60px;background:#fff;border-radius:4px;overflow:hidden;display:block}.item-box[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px solid #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.item-box[_ngcontent-%COMP%]:last-child{border:none}.custom-placeholder[_ngcontent-%COMP%], .drop-area-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .item-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:3px dotted #999;min-height:60px}"]}),t})();const z=[{path:"",component:v,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:(()=>{class t{constructor(t,e,i,n){this.ss=t,this.as=e,this.nsd=i,this.tcp=n}ngOnInit(){this.ss.getShowHideList()}onShowHideChange(t){this.ss.updateShowHideList(t)}onAddNewIns(){this.nsd.getDialog(void 0).afterClosed().subscribe(t=>{if(t&&t.name&&t.dateAdded){const e={dateAdded:new Date(t.dateAdded).getTime(),id:"",name:t.name?this.tcp.transform(t.name):"Invalid Name",hidden:!1};this.ss.addNewSilingCompany(e)}})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(I),l.Y36(N.l),l.Y36(y),l.Y36(n.rS))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-settings-core"]],decls:17,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","25px"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","40px",1,"w-100"],["fxLayout","row","fxLayoutAlign","start center"],[1,"roboto"],[3,"showHideData","onShowHideChange"],["fxLayout","row","fxLayoutAlign","center center"],["mat-flat-button","","color","primary",3,"click"],[1,"mx-1"],[1,""]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"section",1),l.TgZ(2,"div",2),l.TgZ(3,"h2",3),l._uU(4," Show or hide Siling institutions on dashboard "),l.qZA(),l.qZA(),l.TgZ(5,"div"),l.TgZ(6,"app-settings-core-show-hide",4),l.NdJ("onShowHideChange",function(t){return e.onShowHideChange(t)}),l.ALo(7,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"section",1),l.TgZ(9,"div",5),l.TgZ(10,"button",6),l.NdJ("click",function(){return e.onAddNewIns()}),l.TgZ(11,"mat-icon"),l._uU(12,"add"),l.qZA(),l.TgZ(13,"span",7),l._uU(14," Add New Institution "),l.qZA(),l.TgZ(15,"mat-icon",8),l._uU(16,"account_balance"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.Q6J("showHideData",l.lcZ(7,1,e.ss.showHideList$)))},directives:[h.xw,h.Wh,h.SQ,$,m.lW,p.Hw],pipes:[n.Ov],styles:[""]}),t})()}]}];let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[A.Bz.forChild(z)],A.Bz]}),t})();var R=i(436),B=i(4689),E=i(9996),K=i(7727),X=i(4019),V=i(878),tt=i(1447);const et=[(()=>{class t{constructor(t,e,i){this.actions$=t,this.ts=e,this.ss=i,this.updateShowHideList$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(H),(0,R.b)(t=>{const e=t.showHideData;return this.ss.saveShowHideList(e).then(t=>C({showHideData:e,successMsg:"Updated Show/Hide list successfully."})).catch(t=>k({errMsg:t}))}))),this.getShowHideList$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(S),(0,B.w)(t=>this.ss.fetchShowHideList().pipe((0,E.U)(t=>_({payload:t,successMsg:"Fetched Show/Hide list successfully."})),(0,K.K)(t=>(0,V.of)(O({errMsg:t}))))))),this.successOperationToast$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(_,C),(0,X.b)(t=>{var e;const i=null!==(e=t.successMsg)&&void 0!==e?e:"Operation success.";this.ts.getSuccess(i)})),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(o.eX),l.LFG(tt.M),l.LFG(I))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})()],it=(0,s.Lq)({showHideLists:{hiding:[],showing:[]},showHideLoading:!1},(0,s.on)(H,(t,{showHideData:e})=>Object.assign(Object.assign({},t),{showHideLoading:!0,showHideLists:e})),(0,s.on)(C,(t,{showHideData:e})=>Object.assign(Object.assign({},t),{showHideLoading:!1,showHideLists:e,err:!1,errMsg:void 0})),(0,s.on)(k,(t,{errMsg:e})=>Object.assign(Object.assign({},t),{showHideLoading:!1,err:!0,errMsg:e})),(0,s.on)(S,t=>Object.assign(Object.assign({},t),{showHideLoading:!0})),(0,s.on)(_,(t,{payload:e})=>Object.assign(Object.assign({},t),{showHideLoading:!1,showHideLists:e,err:!1,errMsg:void 0})),(0,s.on)(O,(t,{errMsg:e})=>Object.assign(Object.assign({},t),{showHideLoading:!1,err:!0,errMsg:e})));let nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[y,n.rS],imports:[[a.n,W,o.sQ.forFeature(et),s.Aw.forFeature("settings",it)]]}),t})()}}]);