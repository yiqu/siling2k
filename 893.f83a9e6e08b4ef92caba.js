(self.webpackChunksiling2k=self.webpackChunksiling2k||[]).push([[893],{9893:(t,n,i)=>{"use strict";i.r(n),i.d(n,{CoreModule:()=>vt});var e=i(8785),o=i(229),a=i(1),s=i(2852),r=i(5366);let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-core"]],decls:2,vars:0,consts:[[1,"container-fluid","mb-5","mt-3"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"router-outlet"),r.qZA())},directives:[s.lC],styles:[""]}),t})();var l=i(5959),g=i(8639),u=i(1041),p=i(2935),d=i(3588),m=function(t){return t.TEXT_INPUT="TEXT_INPUT",t.SELECT_INPUT="SELECT_INPUT",t.DATE_INPUT="DATE_INPUT",t}({}),f=i(3936),h=i(1293),y=i(5965),x=i(1116),Z=i(4369),T=i(3070),w=i(9550),A=i(3841),v=i(7064),L=i(7307),N=i(9024),b=i(158);function C(t,n){1&t&&(r.ynx(0),r._uU(1," Editing Existing Entry "),r.BQk())}function F(t,n){1&t&&r._uU(0," New Siling1k Entry ")}function S(t,n){1&t&&(r.TgZ(0,"div",8),r._uU(1," Fix invalid inputs before saving. "),r.qZA())}function q(t,n){1&t&&(r.TgZ(0,"span",22),r._uU(1,"$\xa0"),r.qZA())}function E(t,n){if(1&t&&(r.TgZ(0,"mat-hint",23),r._uU(1),r.ALo(2,"silingEntryTooltip"),r.qZA()),2&t){const t=r.oxw(2).$implicit;r.Q6J("id",null),r.xp6(1),r.hij(" ",r.xi3(2,2,t.controlName,!0)," ")}}function I(t,n){1&t&&(r.TgZ(0,"mat-error"),r._uU(1," Please enter a valid number! "),r.qZA())}function _(t,n){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"mat-form-field",17),r.TgZ(2,"mat-label"),r._uU(3),r.ALo(4,"silingEntryTooltip"),r.qZA(),r.TgZ(5,"input",18),r.NdJ("focus",function(){r.CHM(t);const n=r.oxw().$implicit;return r.oxw(2).onFocus(n.controlName)}),r.qZA(),r.YNc(6,q,2,0,"span",19),r.YNc(7,E,3,5,"mat-hint",20),r.YNc(8,I,2,0,"mat-error",21),r.qZA(),r.BQk()}if(2&t){const t=r.oxw().$implicit,n=r.oxw(2);let i;r.xp6(3),r.Oqu(r.xi3(4,5,t.controlName,!0)),r.xp6(2),r.Q6J("formControlName",t.controlName),r.xp6(1),r.Q6J("ngIf","amount"===t.controlName),r.xp6(1),r.Q6J("ngIf",n.currentFocusControl===t.controlName),r.xp6(1),r.Q6J("ngIf",null==(i=n.entryFg.get(t.controlName))?null:i.hasError("optionalCommaSingleDecimalNumberOnly"))}}function O(t,n){if(1&t&&(r.TgZ(0,"mat-option",27),r.TgZ(1,"mat-icon"),r._uU(2,"account_balance"),r.qZA(),r._uU(3),r.ALo(4,"silingCompanyDisplay"),r.qZA()),2&t){const t=n.$implicit;r.Q6J("value",t),r.xp6(3),r.hij(" ",r.lcZ(4,2,t.name)," ")}}function U(t,n){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"mat-select",24),r.NdJ("focus",function(){r.CHM(t);const n=r.oxw(2).$implicit;return r.oxw(2).onFocus(n.controlName)}),r.TgZ(2,"mat-option"),r._uU(3,"None"),r.qZA(),r.YNc(4,O,5,4,"mat-option",25),r.TgZ(5,"mat-select-trigger"),r.TgZ(6,"div",26),r.TgZ(7,"mat-icon"),r._uU(8,"account_balance"),r.qZA(),r.TgZ(9,"div"),r._uU(10),r.ALo(11,"silingCompanyDisplay"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.BQk()}if(2&t){const t=n.ngIf,i=r.oxw(2).$implicit,e=r.oxw(2);let o;r.xp6(1),r.Q6J("formControlName",i.controlName),r.xp6(3),r.Q6J("ngForOf",t),r.xp6(6),r.hij(" ",r.lcZ(11,3,null==(o=e.entryFg.get("company"))||null==o.value?null:o.value.name)," ")}}function k(t,n){if(1&t&&(r.TgZ(0,"mat-hint",23),r._uU(1),r.ALo(2,"silingEntryTooltip"),r.qZA()),2&t){const t=r.oxw(2).$implicit;r.Q6J("id",null),r.xp6(1),r.hij(" ",r.xi3(2,2,t.controlName,!0)," ")}}function D(t,n){if(1&t&&(r.ynx(0),r.TgZ(1,"mat-form-field",17),r.TgZ(2,"mat-label"),r._uU(3),r.ALo(4,"silingEntryTooltip"),r.qZA(),r.YNc(5,U,12,5,"ng-container",21),r.ALo(6,"async"),r.YNc(7,k,3,5,"mat-hint",20),r.qZA(),r.BQk()),2&t){const t=r.oxw().$implicit,n=r.oxw(2);r.xp6(3),r.Oqu(r.xi3(4,3,t.controlName,!0)),r.xp6(2),r.Q6J("ngIf",r.lcZ(6,6,n.data.companies)),r.xp6(2),r.Q6J("ngIf",n.currentFocusControl===t.controlName)}}function Q(t,n){if(1&t&&(r.TgZ(0,"mat-hint",23),r._uU(1),r.ALo(2,"silingEntryTooltip"),r.qZA()),2&t){const t=r.oxw(2).$implicit;r.Q6J("id",null),r.xp6(1),r.hij(" ",r.xi3(2,2,t.controlName,!0)," ")}}function J(t,n){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"mat-form-field",17),r.TgZ(2,"mat-label"),r._uU(3),r.ALo(4,"silingEntryTooltip"),r.qZA(),r.TgZ(5,"input",28),r.NdJ("focus",function(){r.CHM(t);const n=r.oxw().$implicit;return r.oxw(2).onFocus(n.controlName)}),r.qZA(),r._UZ(6,"mat-datepicker-toggle",29),r._UZ(7,"mat-datepicker",null,30),r.YNc(9,Q,3,5,"mat-hint",20),r.qZA(),r.BQk()}if(2&t){const t=r.MAs(8),n=r.oxw().$implicit,i=r.oxw(2);r.xp6(3),r.Oqu(r.xi3(4,5,n.controlName,!0)),r.xp6(2),r.Q6J("matDatepicker",t)("formControlName",n.controlName),r.xp6(1),r.Q6J("for",t),r.xp6(3),r.Q6J("ngIf",i.currentFocusControl===n.controlName)}}function P(t,n){if(1&t&&(r.ynx(0),r.TgZ(1,"div"),r.ynx(2,15),r.YNc(3,_,9,8,"ng-container",16),r.YNc(4,D,8,8,"ng-container",16),r.YNc(5,J,10,8,"ng-container",16),r.BQk(),r.qZA(),r.BQk()),2&t){const t=n.$implicit;r.xp6(2),r.Q6J("ngSwitch",t.inputType),r.xp6(1),r.Q6J("ngSwitchCase","TEXT_INPUT"),r.xp6(1),r.Q6J("ngSwitchCase","SELECT_INPUT"),r.xp6(1),r.Q6J("ngSwitchCase","DATE_INPUT")}}function j(t,n){if(1&t&&(r.ynx(0),r.TgZ(1,"div",31),r._uU(2),r.ALo(3,"titlecase"),r.qZA(),r.TgZ(4,"div",32),r._uU(5),r.ALo(6,"silingEntryTooltip"),r.qZA(),r.BQk()),2&t){const t=r.oxw(2);r.xp6(2),r.hij(" ",r.lcZ(3,2,t.currentFocusControl)," "),r.xp6(3),r.hij(" ",r.lcZ(6,4,t.currentFocusControl)," ")}}function Y(t,n){1&t&&(r.TgZ(0,"div",33),r._uU(1," Enter the dollar amount for its institution. "),r.qZA())}function $(t,n){if(1&t&&(r.ynx(0),r.TgZ(1,"div",9),r.TgZ(2,"div",10),r.TgZ(3,"form",11),r.YNc(4,P,6,4,"ng-container",12),r.qZA(),r.TgZ(5,"div",13),r.YNc(6,j,7,6,"ng-container",1),r.YNc(7,Y,2,0,"ng-template",null,14,r.W1O),r.qZA(),r.qZA(),r.qZA(),r.BQk()),2&t){const t=r.MAs(8),n=r.oxw();r.xp6(3),r.Q6J("formGroup",n.entryFg),r.xp6(1),r.Q6J("ngForOf",n.entryFgStruct),r.xp6(2),r.Q6J("ngIf",n.currentFocusControl)("ngIfElse",t)}}function H(t,n){1&t&&(r.TgZ(0,"div"),r._uU(1," Loading... "),r.qZA())}const G=["company"],M=["date"],B=["companyLoading","companies"];let R=(()=>{class t{constructor(t,n,i){this.dialogRef=t,this.data=n,this.fb=i,this.entryFgStruct=[],this.compDest$=new l.xQ,this.entryFg=this.fb.group(this.createFormGroupObj(n)),this.entryFgStruct=this.createFgStructure(n)}get amountFc(){return this.entryFg.get("amount")}ngOnInit(){this.entryFg.valueChanges.pipe((0,d.j)("amount")).subscribe(t=>{t&&this.amountFc.setValue((t+"").trim(),{emitEvent:!1})})}createFormGroupObj(t){return{company:g.j2(null==t?void 0:t.company,!1,[u.kI.required]),date:g.j2(new Date(null==t?void 0:t.date),!1,[u.kI.required]),amount:g.j2(null==t?void 0:t.amount,!1,[f.iN])}}createFgStructure(t){const n=[];let i=Object.keys(t);i.length<1&&(i=["company","date","amount"]);for(const e of i)if(B.indexOf(e)<0){let i=m.TEXT_INPUT;G.indexOf(e)>-1?i=m.SELECT_INPUT:M.indexOf(e)>-1&&(i=m.DATE_INPUT),n.push({controlName:e,inputType:i,value:t[e]})}return n}onFocus(t){this.currentFocusControl=t}onNoClick(){this.dialogRef.close()}onSave(){this.dialogRef.close(this.entryFg.getRawValue())}ngOnDestroy(){}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(p.so),r.Y36(p.WI),r.Y36(u.qu))},t.\u0275cmp=r.Xpm({type:t,selectors:[["new-siling1k-entry-dialog"]],decls:17,vars:8,consts:[["mat-dialog-title","","ngClass.gt-sm","big","fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","space-between start",1,"mfont","my-2"],[4,"ngIf","ngIfElse"],["newEntry",""],["class","text-danger err-header",4,"ngIf"],["fxLayout","row","fxLayoutGap","1rem","fxLayoutAlign","end center"],["mat-flat-button","",3,"disabled","click"],["mat-flat-button","",3,"click"],["isLoading",""],[1,"text-danger","err-header"],["mat-dialog-content","",1,"content-parent"],["fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","space-between start",1,"w-100"],["fxFlex.gt-sm","50",3,"formGroup"],[4,"ngFor","ngForOf"],["fxFlex","50","fxHide","","fxShow.gt-sm","",1,"tooltip-parent"],["noTooltip",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["appearance","standard",1,"w-100"],["type","text","matInput","",3,"formControlName","focus"],["matPrefix","",4,"ngIf"],[3,"id",4,"ngIf"],[4,"ngIf"],["matPrefix",""],[3,"id"],[3,"formControlName","focus"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","start end"],[3,"value"],["matInput","",3,"matDatepicker","formControlName","focus"],["matSuffix","",3,"for"],["picker",""],["fxLayout","row","fxLayoutAlign","start center",1,"font-weight-bold","subtitle","mfont","mb-2"],["fxLayout","row","fxLayoutAlign","start center",1,"roboto"],["fxLayout","column","fxLayoutAlign","center center"]],template:function(t,n){if(1&t&&(r.TgZ(0,"h1",0),r.TgZ(1,"div"),r.YNc(2,C,2,0,"ng-container",1),r.YNc(3,F,1,0,"ng-template",null,2,r.W1O),r.qZA(),r.YNc(5,S,2,0,"div",3),r.qZA(),r._UZ(6,"hr"),r.YNc(7,$,9,4,"ng-container",1),r.ALo(8,"async"),r._UZ(9,"hr"),r.TgZ(10,"div",4),r.TgZ(11,"button",5),r.NdJ("click",function(){return n.onSave()}),r._uU(12,"Save"),r.qZA(),r.TgZ(13,"button",6),r.NdJ("click",function(){return n.onNoClick()}),r._uU(14,"Cancel"),r.qZA(),r.qZA(),r.YNc(15,H,2,0,"ng-template",null,7,r.W1O)),2&t){const t=r.MAs(4),i=r.MAs(16);r.xp6(2),r.Q6J("ngIf",n.data.company)("ngIfElse",t),r.xp6(3),r.Q6J("ngIf",n.entryFg.touched&&n.entryFg.invalid),r.xp6(2),r.Q6J("ngIf",!1===r.lcZ(8,6,n.data.companyLoading))("ngIfElse",i),r.xp6(4),r.Q6J("disabled",n.entryFg.invalid)}},directives:[p.uh,h.oO,y.xw,y.SQ,y.Wh,x.O5,Z.lW,p.xY,u._Y,u.JL,y.yH,u.sg,x.sg,h.b8,x.RF,x.n9,T.KE,T.hX,w.Nt,u.Fj,u.JJ,u.u,T.qo,T.bx,T.TO,A.gD,v.ey,A.$L,L.Hw,N.hl,N.nW,T.R9,N.Mq],pipes:[x.Ov,b.q,b.n,x.rS],styles:["h1[_ngcontent-%COMP%]{font-size:18px;font-weight:700}h1[_ngcontent-%COMP%]   .err-header[_ngcontent-%COMP%]{font-size:13px}.big[_ngcontent-%COMP%]{width:40rem}.tooltip-parent[_ngcontent-%COMP%]{width:23rem}"]}),t})(),W=(()=>{class t{constructor(t){this.dialog=t,this.dialogRef=void 0}getDialog(t){return this.dialogRef=void 0,this.dialogRef=this.dialog.open(R,{data:Object.assign({},t),panelClass:"new-siling1k-entry",hasBackdrop:!0,autoFocus:!0,disableClose:!0}),this.dialogRef}}return t.\u0275fac=function(n){return new(n||t)(r.LFG(p.uw))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();var z=i(2523);const X=(0,o.PH)("[Siling/API] Save entry start",(0,o.Ky)()),K=(0,o.PH)("[Siling/API] Save entry successful",(0,o.Ky)()),V=(0,o.PH)("[Siling/API] Save entry start failure",(0,o.Ky)()),tt=(0,o.PH)("[Siling/API] Get siling data by ins. name start",(0,o.Ky)()),nt=(0,o.PH)("[Siling/API] Get siling data by ins. name successful",(0,o.Ky)()),it=(0,o.PH)("[Siling/API] Get siling data by ins. name failure",(0,o.Ky)()),et=(0,o.ZF)("dashboard"),ot=(0,o.P1)(et,t=>t.entrySaveLoading);var at=i(8811);let st=(()=>{class t{constructor(t,n){this.store=t,this.rs=n,this.isEntrySaveLoading$=this.store.select(ot)}saveSilingEntry(t){this.store.dispatch(X({payload:t}))}getSilingDataByInsName(t){t&&t.length>0&&this.store.dispatch(tt({names:t}))}fetchSilingCompanies(){return this.rs.getCollection("settings/kqpro/companies/all")}fetchShowHideList(){return this.rs.getDocument("settings/kqpro/showHideList")}}return t.\u0275fac=function(n){return new(n||t)(r.LFG(o.yh),r.LFG(at.v))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rt=(()=>{class t{constructor(t,n,i){this.neds=t,this.as=n,this.cs=i,this.compDest$=new l.xQ}ngOnInit(){}onNewEntryClick(){this.as.fetchSilingCompanies();const t={amount:void 0,company:void 0,companies:this.as.getSilingCompanies$,companyLoading:this.as.getSilingCompanyLoading$,date:(new Date).getTime()};this.neds.getDialog(t).afterClosed().subscribe(t=>{if(t&&t.amount&&t.company&&t.date){const n={amount:(0,g.G5)(t.amount),company:t.company.id,date:t.date.getTime(),id:void 0};this.cs.saveSilingEntry(n)}})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(W),r.Y36(z.l),r.Y36(st))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-core-home"]],decls:12,vars:0,consts:[[1,""],["mat-button","","color","primary",3,"click"]],template:function(t,n){1&t&&(r.TgZ(0,"section"),r.TgZ(1,"div",0),r.TgZ(2,"button",1),r.NdJ("click",function(){return n.onNewEntryClick()}),r.TgZ(3,"mat-icon"),r._uU(4,"add"),r.qZA(),r.TgZ(5,"span"),r._uU(6," New "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(7,"hr"),r.TgZ(8,"section"),r._uU(9," Graph\n"),r.qZA(),r.TgZ(10,"section"),r._uU(11," Table\n"),r.qZA())},directives:[Z.lW,L.Hw],styles:[""]}),t})();var ct=i(3148),lt=i(611),gt=i(4019),ut=i(8177);const pt=[{path:"",component:c,children:[{path:"",redirectTo:"summary",pathMatch:"full"},{path:"summary",component:rt}],resolve:{resolverFired:(()=>{class t{constructor(t,n){this.cs=t,this.ss=n,this.getCompaniesBeingDisplayed$=(0,ct.D)({allCompanies:this.cs.fetchSilingCompanies(),showHideList:this.cs.fetchShowHideList()})}resolve(t,n){return this.getCompaniesBeingDisplayed$.pipe((0,lt.q)(1),(0,gt.b)(t=>{const n=[];let i=[],e=[];t.showHideList&&t.showHideList.hiding&&t.showHideList.hiding.length>-1&&(i=t.showHideList.hiding),t.showHideList&&t.showHideList.showing&&t.showHideList.showing.length>-1&&(e=t.showHideList.showing),t.allCompanies.forEach(t=>{i.findIndex(n=>n.name===t.name)<0&&n.push(t)}),n.sort((t,n)=>e.findIndex(n=>n.id===t.id)>e.findIndex(t=>t.id===n.id)?1:-1);const o=n.map(t=>t.name.toLowerCase());this.cs.getSilingDataByInsName(o)}))}}return t.\u0275fac=function(n){return new(n||t)(r.LFG(st),r.LFG(ut.g))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},runGuardsAndResolvers:"always"}];let dt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.Bz.forChild(pt)],s.Bz]}),t})();var mt=i(3982),ft=i(4689),ht=i(9996),yt=i(7727),xt=i(878),Zt=i(1447);const Tt=[(()=>{class t{constructor(t,n,i){this.actions$=t,this.ts=n,this.rs=i,this.saveSilingEntry$=(0,e.GW)(()=>this.actions$.pipe((0,e.l4)(X),(0,mt.zg)(t=>{const n=t.payload,i=this.rs.addEntryToCollection(n),e=Object.assign(Object.assign({},n),{id:i.id});return i.operationObs.then(t=>(this.ts.getSuccess("Entry added successfully."),K({payload:e,date:(new Date).getTime()}))).catch(t=>V({errMsg:t}))}))),this.getSilingDataByNames$=(0,e.GW)(()=>this.actions$.pipe((0,e.l4)(tt),(0,ft.w)(t=>{const n={};return t.names.forEach(t=>{n[t]=this.rs.getDataByCollectionName(t)}),(0,ct.D)(n).pipe((0,ht.U)(t=>(this.ts.getSuccess("Loaded Siling data successfully."),nt({payload:t,date:(new Date).getTime()}))),(0,yt.K)(t=>(0,xt.of)(it({errMsg:t}))))})))}}return t.\u0275fac=function(n){return new(n||t)(r.LFG(e.eX),r.LFG(Zt.M),r.LFG(at.v))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})()],wt=(0,o.Lq)({entrySaveLoading:!1,entryApiErr:!1,entryToSave:void 0,entryApiErrMsg:void 0,silingDataBeingFetchedNames:[],silingDataErr:!1,silingDataLoading:!1,silingData:void 0},(0,o.on)(X,(t,{payload:n})=>Object.assign(Object.assign({},t),{entrySaveLoading:!0,entryToSave:n})),(0,o.on)(K,(t,{payload:n})=>Object.assign(Object.assign({},t),{entryApiErr:!1,entryApiErrMsg:void 0,entrySaveLoading:!1,entryToSave:n})),(0,o.on)(V,(t,{errMsg:n})=>Object.assign(Object.assign({},t),{entryApiErr:!0,entryApiErrMsg:n,entrySaveLoading:!1})),(0,o.on)(tt,(t,{names:n})=>Object.assign(Object.assign({},t),{silingDataBeingFetchedNames:n,silingDataLoading:!0})),(0,o.on)(nt,(t,{payload:n})=>Object.assign(Object.assign({},t),{silingDataLoading:!1,silingData:n})),(0,o.on)(it,(t,{errMsg:n})=>Object.assign(Object.assign({},t),{silingDataLoading:!1,silingDataErrMsg:n,silingDataErr:!0}))),At=(0,o.Lq)({});let vt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[W],imports:[[a.n,e.sQ.forFeature(Tt),o.Aw.forFeature("dashboard",wt),o.Aw.forFeature("dashboardUI",At),dt]]}),t})()}}]);